<launch>
	<include file="$(find kobuki_node)/launch/robot_with_tf.launch" />

	<node name="laser_node" pkg="urg_node" type="urg_node" respawn="true">
		<param name="ip_address" value="192.168.0.10" />

		<remap from="scan" to="scan_hokuyo" />
	</node>

	<group ns="camera">
		<include file="$(find realsense2_camera)/launch/includes/nodelet.launch.xml">
			<arg name="depth_width"       value="480"/>
			<arg name="depth_height"      value="270"/>
			<arg name="depth_fps"         value="15"/>
			<arg name="color_width"       value="424"/>
			<arg name="color_height"      value="240"/>
			<arg name="color_fps"         value="15"/>
			<arg name="enable_depth"      value="true"/>
			<arg name="enable_color"      value="true"/>
			<arg name="enable_infra1"     value="false"/>
			<arg name="enable_infra2"     value="false"/>
			<arg name="enable_fisheye"    value="false"/>
			<arg name="enable_imu"        value="false"/>
			<arg name="enable_pointcloud" value="true"/>
			<arg name="enable_sync"       value="true"/>
		</include>
	</group>

	<node name="pointcloud_to_laserscan" pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node">
		<param name="min_height" value="-0.3" />
		<param name="max_height" value="0.025" />
		<param name="angle_min" value="-0.7854" />
		<param name="angle_max" value="0.7854" />
		<param name="angle_increment" value="0.004363323" />
		<param name="scan_time" value="0.033" />
		<param name="range_min" value="0.25" />
		<param name="range_max" value="6" />
		<param name="concurrency_level" value="4" />
		<param name="target_frame" value="camera_link" />

		<remap from="cloud_in" to="camera/depth/color/points" />
		<remap from="scan" to="scan_realsense" />
	</node>

	<node name="joy" pkg="joy" type="joy_node" respawn="true">
		<param name="autorepeat_rate" value="5" />
	</node>

	<node name="link_hokuyo" pkg="tf2_ros" type="static_transform_publisher"  args="0 0 0.24  0 0 0 base_link laser" />
	<node name="link_realsense" pkg="tf2_ros" type="static_transform_publisher"  args="-0.04 0 0.3  0 0 0 base_link camera_link" />

	<node name="nn_interface_node" pkg="roblearn_nn_interface" type="nn_interface_node.py" respawn="true" />
</launch>
